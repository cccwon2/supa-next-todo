## Todo ì˜ˆì œ (Supabase ì‚¬ìš©)

- **í”„ë¡ íŠ¸ì—”ë“œ**:

  - [Next.js](https://github.com/vercel/next.js): í”„ë¡œë•ì…˜ìš© React í”„ë ˆì„ì›Œí¬
  - [Tailwind CSS](https://tailwindcss.com/): ìŠ¤íƒ€ì¼ë§ê³¼ ë ˆì´ì•„ì›ƒì„ ìœ„í•œ ë„êµ¬
  - [Supabase.js](https://supabase.com/docs/library/getting-started): ì‚¬ìš©ì ê´€ë¦¬ ë° ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”

- **ë°±ì—”ë“œ**:
  - [supabase.com/dashboard](https://supabase.com/dashboard/): Supabase.jsì™€ í•¨ê»˜ ì‚¬ìš©ë˜ëŠ” RESTful APIê°€ ì œê³µë˜ëŠ” í˜¸ìŠ¤íŒ… Postgres ë°ì´í„°ë² ì´ìŠ¤

---

## Vercelì„ í†µí•œ ë°°í¬

Vercelì„ ì‚¬ìš©í•œ ë°°í¬ëŠ” Supabase ê³„ì • ë° í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì„ ì•ˆë‚´í•©ë‹ˆë‹¤. Supabase í†µí•© ì„¤ì¹˜ í›„ ëª¨ë“  ê´€ë ¨ í™˜ê²½ ë³€ìˆ˜ê°€ ìë™ìœ¼ë¡œ ì„¤ì •ë˜ë¯€ë¡œ ë°°í¬ ì§í›„ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ ğŸš€

[![Vercelë¡œ ë°°í¬](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fsupabase%2Fsupabase%2Ftree%2Fmaster%2Fexamples%2Ftodo-list%2Fnextjs-todo-list&project-name=supabase-nextjs-todo-list&repository-name=supabase-nextjs-todo-list&integration-ids=oac_VqOgBHqhEoFTPzGkPd7L0iH6&external-id=https%3A%2F%2Fgithub.com%2Fsupabase%2Fsupabase%2Ftree%2Fmaster%2Fexamples%2Ftodo-list%2Fnextjs-todo-list)

---

## ì²˜ìŒë¶€í„° ë¹Œë“œí•˜ê¸°

### 1. ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±

[Supabaseì— ê°€ì…](https://supabase.com/dashboard)í•˜ê³  ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ì„¸ìš”. ë°ì´í„°ë² ì´ìŠ¤ê°€ ì‹œì‘ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.

### 2. "Todo List" Quickstart ì‹¤í–‰

ë°ì´í„°ë² ì´ìŠ¤ê°€ ì‹œì‘ë˜ë©´ "Todo List" ë¹ ë¥¸ ì‹œì‘ì„ ì‹¤í–‰í•˜ì„¸ìš”. í”„ë¡œì íŠ¸ ë‚´ì—ì„œ `SQL Editor` íƒ­ìœ¼ë¡œ ì´ë™í•˜ì—¬ `TODO LIST: Build a basic todo list with Row Level Security`ë¥¼ ì°¾ì•„ ì‹¤í–‰í•©ë‹ˆë‹¤.

### 3. URL ë° Key ê°€ì ¸ì˜¤ê¸°

í”„ë¡œì íŠ¸ ì„¤ì •(í†±ë‹ˆë°”í€´ ì•„ì´ì½˜)ìœ¼ë¡œ ì´ë™í•˜ì—¬ API íƒ­ì„ ì—´ê³ , API URLê³¼ `anon` í‚¤ë¥¼ ì°¾ìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ í•„ìš”í•©ë‹ˆë‹¤.

`anon` í‚¤ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ API í‚¤ë¡œ, ë¡œê·¸ì¸í•˜ê¸° ì „ê¹Œì§€ëŠ” ìµëª… ì ‘ê·¼ì„ í—ˆìš©í•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ë©´ í‚¤ëŠ” í•´ë‹¹ ì‚¬ìš©ìì˜ ë¡œê·¸ì¸ í† í°ìœ¼ë¡œ ì „í™˜ë˜ì–´ Row Level Securityê°€ í™œì„±í™”ë©ë‹ˆë‹¤.

![API ì •ë³´](https://user-images.githubusercontent.com/10214025/88916245-528c2680-d298-11ea-8a71-708f93e1ce4f.png)

**ì£¼ì˜**: `service_role` í‚¤ëŠ” ëª¨ë“  ë°ì´í„°ì— ëŒ€í•œ ì™„ì „í•œ ì ‘ê·¼ ê¶Œí•œì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ë³´ì•ˆ ì •ì±…ì„ ë¬´ì‹œí•©ë‹ˆë‹¤. ì´ í‚¤ëŠ” ì„œë²„ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©ë˜ë©°, ì ˆëŒ€ í´ë¼ì´ì–¸íŠ¸ë‚˜ ë¸Œë¼ìš°ì €ì—ì„œ ì‚¬ìš©í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.

---

## Supabase ì„¸ë¶€ ì •ë³´

### Postgres Row Level Security

ì´ í”„ë¡œì íŠ¸ëŠ” Postgresì˜ Row Level Security(RLS)ë¥¼ ì‚¬ìš©í•œ ê³ ìˆ˜ì¤€ì˜ ê¶Œí•œ ê´€ë¦¬ë¥¼ í™œìš©í•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ë©´ `authenticated` ì—­í• ê³¼ UUIDê°€ í¬í•¨ëœ JWTê°€ ë°œê¸‰ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê° ì‚¬ìš©ìê°€ ìì‹ ì˜ ë°ì´í„°ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì„¸ë°€í•œ ì œì–´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ë‹¤ìŒì€ ì •ì±…ì´ í¬í•¨ëœ ê°„ì†Œí™”ëœ ìŠ¤í‚¤ë§ˆì…ë‹ˆë‹¤:

```sql
create table todos (
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users not null,
  task text check (char_length(task) > 3),
  is_complete boolean default false,
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

alter table todos enable row level security;

create policy "Individuals can create todos." on todos for
    insert with check ((select auth.uid()) = user_id);

create policy "Individuals can view their own todos." on todos for
    select using ((select auth.uid()) = user_id);

create policy "Individuals can update their own todos." on todos for
    update using ((select auth.uid()) = user_id);

create policy "Individuals can delete their own todos." on todos for
    delete using ((select auth.uid()) = user_id);
```

---

## ì¶”ê°€ ì‚¬í•­

### Swagger ì„¤ì •

ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” Swaggerë¥¼ í†µí•´ API ë¬¸ì„œí™”ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. `/api-docs` ê²½ë¡œì—ì„œ API ìŠ¤í™ì„ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©°, ì¶”ê°€ì ì¸ ìˆ˜ì • ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ì´ Swagger ì„¤ì • íŒŒì¼ì— ë°˜ì˜ë©ë‹ˆë‹¤.

```typescript
/**
 * @swagger
 * components:
 *   schemas:
 *     Todo:
 *       type: object
 *       properties:
 *         id:
 *           type: integer
 *           description: "Todo í•­ëª©ì˜ ê³ ìœ  ì‹ë³„ì"
 *         user_id:
 *           type: string
 *           description: "ì‚¬ìš©ì ID"
 *         task:
 *           type: string
 *           description: "Todo í•­ëª©ì˜ ì‘ì—… ë‚´ìš©"
 *         is_complete:
 *           type: boolean
 *           description: "Todo ì™„ë£Œ ì—¬ë¶€"
 *         inserted_at:
 *           type: string
 *           format: date-time
 *           description: "ìƒì„± ì‹œê°"
 */
```

### Profile í˜ì´ì§€ ì¶”ê°€

ì‚¬ìš©ì í”„ë¡œí•„ì„ í™•ì¸ ë° ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆëŠ” `Profile` í˜ì´ì§€ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ìì‹ ì˜ ì •ë³´ì™€ ê´€ë ¨ëœ ì‚¬í•­ì„ ì¡°íšŒ ë° ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---
